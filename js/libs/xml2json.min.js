function cleanXML(e){return e=e.replace(/\n|\t|\r/g,""),e=e.replace(/ {1,}<|\t{1,}</g,"<"),e=e.replace(/> {1,}|>\t{1,}/g,">"),e=e.replace(/<\?[^>]*\?>/g,""),e=replaceSelfClosingTags(e),e=replaceAloneValues(e),e=replaceAttributes(e)}function replaceSelfClosingTags(e){var r=e.match(/<[^\/][^>]*\/>/g);if(r)for(var t=0;t<r.length;t++){var n=r[t],a=n.substring(0,n.length-2);a+=">";var l=n.match(/[^<][\w+$]*/)[0],s="</"+l+">",i="<"+l+">",g=a.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(g)for(var c=0;c<g.length;c++){var f=g[c],u=f.substring(0,f.indexOf("=")),h=f.substring(f.indexOf('"')+1,f.lastIndexOf('"'));i+="<"+u+">"+h+"</"+u+">"}i+=s,e=e.replace(n,i)}return e}function replaceAloneValues(e){var r=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>{1}([^<]+)/g);if(r)for(var t=0;t<r.length;t++){var n=r[t],a=n.substring(0,n.indexOf(">")+1),l=n.substring(n.indexOf(">")+1),s=a+"<_@ttribute>"+l+"</_@ttribute>";e=e.replace(n,s)}return e}function replaceAttributes(e){var r=e.match(/<[^\/][^>][^<]+\s+.[^<]+[=][^<]+>/g);if(r)for(var t=0;t<r.length;t++){var n=r[t],a=n.match(/[^<][\w+$]*/)[0],l="<"+a+">",s=n.match(/(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/g);if(s)for(var i=0;i<s.length;i++){var g=s[i],c=g.substring(0,g.indexOf("=")),f=g.substring(g.indexOf('"')+1,g.lastIndexOf('"'));l+="<"+c+">"+f+"</"+c+">"}e=e.replace(n,l)}return e}function xml2json(e){e=cleanXML(e);for(var r,t,n,a,l,s={};e.match(/<[^\/][^>]*>/);)l=e.match(/<[^\/][^>]*>/)[0],r=l.substring(1,l.length-1),t=e.indexOf(l.replace("<","</")),-1==t&&(r=l.match(/[^<][\w+$]*/)[0],t=e.indexOf("</"+r),-1==t&&(t=e.indexOf("<\\/"+r))),n=e.substring(l.length,t),a=n.match(/<[^\/][^>]*>/)?xml2json(n):n,void 0===s[r]?s[r]=a:Array.isArray(s[r])?s[r].push(a):s[r]=[s[r],a],e=e.substring(2*l.length+1+n.length);return s}